(function(){if(!this.VisanetCheckout){this.VisanetCheckout={};var e,t,n,i,r,o,s=document.currentScript||(e=document.getElementsByTagName("script"))[e.length-1];this.VisanetCheckout.initfp=!1,this.VisanetCheckout.isNumeric=function(e,t){"."===e.toString().substring(e.length-1)&&(e=e.toString()+"0");var n=new RegExp("^\\s*-?(\\d+(\\.\\d{1,"+t+"})?|\\.\\d{1,"+t+"})\\s*$","g");return-1===t&&(n=new RegExp("^\\s*-?(\\d+(\\.\\d{1,25})?|\\.\\d{1,25})\\s*$","g")),n.test(e)},this.VisanetCheckout.isSpanish=(t=(navigator.language||navigator.userLanguage).split("-"),n=!1,1<=t.length&&(n="es"===t[0]),n),this.VisanetCheckout.onCI=-1!==s.src.indexOf("qa=true"),this.VisanetCheckout.onProd=-1!==(i=s.src,o=document.createElement("div"),o.innerHTML="<a></a>",o.firstChild.href=i,o.innerHTML=o.innerHTML,(r=o.firstChild).protocol+"//"+r.host).indexOf("static-content.vnforapps.com"),this.VisanetCheckout.host=this.VisanetCheckout.onProd?"https://static-content.vnforapps.com/v2":"https://static-content-qas.vnforapps.com/v2",this.VisanetCheckout.scriptTag=s}}).call(this),function(e){this.VisanetCheckout.validate||(this.VisanetCheckout.validate={inValues:function(){for(var e=1;e<arguments.length;e++)if(arguments[e]==arguments[0])return!0;return!1},preprocess:function(e){var t,n=!1,i=!1,r=!1;if(null==e)return null;if(null===e.action||void 0===e.action)return null;if(!!e.recurrencetype&&this.inValues(e.recurrencetype.toLowerCase(),"fixed","fixedinitial")||(e.recurrenceamount=e.recurrenceamount?e.recurrenceamount:"0.00"),e.currency=null===e.currency||void 0===e.currency?"PEN":"USD"!==e.currency?"PEN":e.currency,t=void 0!==e.recurrence&&null!==e.recurrence&&"true"===e.recurrence.toString().trim().toLowerCase(),n=void 0!==e.amount&&null!==e.amount?VisanetCheckout.isNumeric(e.amount,2):n,i=e.recurrenceamount?VisanetCheckout.isNumeric(e.recurrenceamount,2):i,r=e.recurrencemaxamount?VisanetCheckout.isNumeric(e.recurrencemaxamount,2):r,e.channel&&(e.channel=this.inValues(e.channel.toLowerCase(),"web","mobile","callcenter","recurrent")?e.channel.toLowerCase():"web"),e.expirationminutes&&!VisanetCheckout.isNumeric(e.expirationminutes))return alert("Field expirationminutes has to be set as a numeric value"),null;if(e.expirationminutes<5||20<e.expirationminutes)return alert("Field expirationminutes has to be set between 5 to 20"),null;if(!e.timeouturl)return alert("Field timeouturl is required"),null;if(t){if(!i)return alert("Field recurrenceamount has to be set as a numeric value when recurrence has been set to true."),null;if(!n&&i?(e.amount=e.recurrenceamount,n=!0):n&&!i&&(e.recurrenceamount=e.amount,i=!0),!r)return alert("Field recurrencemaxamount has to be set as a numeric value when recurrence has been set to true."),null;e.recurrencetype&&(e.recurrencetype=this.inValues(e.recurrencetype.toLowerCase(),"fixed","fixedinitial","variable","variableinitial")?e.recurrencetype.toLowerCase():"fixed",e.recurrenceamount=this.inValues(e.recurrencetype.toLowerCase(),"variableinitial","variable")?0:e.recurrenceamount),e.recurrencefrequency&&(e.recurrencefrequency=this.inValues(e.recurrencefrequency.toLowerCase(),"annual","monthly","biannual","quarterly")?e.recurrencefrequency.toLowerCase():"monthly")}else if(!n)return null;return e.isrecurrence=t,e},combinate:function(e,t){return e&&t&&(t.channel=e.channel?e.channel:t.channel,t.amount=e.amount&&VisanetCheckout.isNumeric(e.amount,2)?e.amount:t.amount,t.currency=e.currency?e.currency:t.currency,t.merchantlogo=e.merchantlogo?e.merchantlogo:t.merchantlogo,t.merchantid=e.merchantid?e.merchantid:t.merchantid,t.merchantname=e.merchantname?e.merchantname:t.merchantname,t.formbuttoncolor=e.formbuttoncolor?e.formbuttoncolor:t.formbuttoncolor,t.showamount=e.showamount?e.showamount.trim().toLowerCase():t.showamount,t.purchasenumber=e.purchasenumber?e.purchasenumber:t.purchasenumber,t.cardholdername=e.cardholdername?e.cardholdername:t.cardholdername,t.cardholderlastname=e.cardholderlastname?e.cardholderlastname:t.cardholderlastname,t.cardholderemail=e.cardholderemail?e.cardholderemail:t.cardholderemail,t.usertoken=e.usertoken?e.usertoken:t.usertoken,t.recurrence=e.recurrence?e.recurrence.toLowerCase().trim():t.recurrence,t.frequency=e.frequency?e.frequency:t.frequency,t.recurrencetype=e.recurrencetype?e.recurrencetype:t.recurrencetype,t.recurrenceamount=e.recurrenceamount&&VisanetCheckout.isNumeric(e.recurrenceamount,2)?e.recurrenceamount:t.recurrenceamount,t.recurrencemaxamount=e.recurrencemaxamount&&VisanetCheckout.isNumeric(e.recurrencemaxamount,2)?e.recurrenceamount:t.recurrencemaxamount),t},isValid:function(e){return!!e&&(!!(e.channel&&e.merchantid&&e.amount&&e.currency&&e.sessiontoken&&e.purchasenumber)||(alert("At a minimum, the action, channel, merchantid, sessiontoken, amount and purchasenumber options have to be set"),!1))}})}.call(this,document),function(i){this.VisanetCheckout.utils||(this.VisanetCheckout.utils={bind:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},bindFn:function(e,t){return function(){return e.apply(t,arguments)}},addJsLink:function(e){var t=i.createElement("script");t.src=e,t.type="text/javascript",i.getElementsByTagName("head")[0].appendChild(t)},addCssLink:function(e){var t=i.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,i.getElementsByTagName("head")[0].appendChild(t)},addInput:function(e,t){var n=i.createElement("input");return n.type="hidden",n.value=t,n.name=e,n}})}.call(this,document),function(){this.VisanetCheckout.ua||(this.VisanetCheckout.ua={userAgent:window.navigator.userAgent,isiPhone:function(){return/(iPhone|iPod)/i.test(this.userAgent)},isiOSWebView:function(){return/(iPhone|iPod).*AppleWebKit(?!.*Safari)/i.test(this.userAgent)},isMobileDevice:function(){return this.isiPhone()&&!this.isiOSWebView()}})}.call(this),function(){this.VisanetCheckout.Navigator||(this.VisanetCheckout.Navigator=function(){function e(){}return e.isSupportTLS1_2=function(){var e=!0,t=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""};if("Chrome"===n[1]&&null!=(e=t.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:e[1]};n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]);return{name:n[0],version:n[1]}}(),n=parseInt(t.version);switch(t.name.toLowerCase()){case"chrome":n<30&&(e=!1);break;case"opera":n<17&&(e=!1);break;case"ie":case"msie":n<10&&(e=!1);break;case"safari":n<7&&(e=!1);break;case"firefox":n<27&&(e=!1)}return e},e}())}.call(this),function(){if(!this.VisanetCheckout.RPC){var n=this.VisanetCheckout.utils;this.VisanetCheckout.RPC=function(){function e(e){var t;this.target=e.target,this.type=e.type||"server",this.methods={},this.messages=[],this.isReady=!1,n.bind(window,"message",(t=this,function(){return t.handleMessage.apply(t,arguments)}))}return e.prototype.sendMessage=function(e){data=JSON.stringify(e),this.send(data)},e.prototype.send=function(e){!0===this.isReady?this.target.postMessage(e,"*"):this.messages.push(e)},e.prototype.handleMessage=function(e){e.source==this.target&&this.processMessage(e.data)},e.prototype.processMessage=function(e){message=JSON.parse(e),!0!==message.isReady||!1!==this.isReady?this.methods[message.method]&&(this.methods[message.method],1)&&this.methods[message.method].apply(this.methods,message.args):this.ready()},e.prototype.whenReady=function(e){if(this.isReady)return e();this.onReadyCallback=e},e.prototype.ready=function(){var e;for(this.isReady=!0,this.onReadyCallback&&this.onReadyCallback(),this.sendMessage({isReady:!0,type:this.type});e=this.messages.shift();)this.send(e)},e.prototype.invoke=function(){var e,t,n=Array.prototype.slice;e=arguments[0],t=n.call(arguments,1),this.sendMessage({method:e,args:t})},e}()}}.call(this),function(h){if(!this.VisanetCheckout.Iframe){var l=this.VisanetCheckout.RPC,d=this.VisanetCheckout.utils,p=this.VisanetCheckout;this.VisanetCheckout.Iframe=function(){var t,n,i,r,o,s,a,c,u=h.body;function e(){var e=p.host+"/visanet.html?"+Math.random();p.onCI&&(e+="&qa=true"),this.opened=!1,this.src=e,this.iframe=this.addIframe(),this.rpc=new l({target:this.iframe.contentWindow,type:"server"}),this.rpc.methods.cancel=d.bindFn(this.cancel,this),this.rpc.methods.addfingerprint=d.bindFn(this.addfingerprint,this),this.rpc.methods.qrcomplete=d.bindFn(this.qrcomplete,this),this.rpc.methods.close=d.bindFn(this.close,this),this.rpc.methods.complete=d.bindFn(this.complete,this)}return e.prototype.config=function(e){this.configuration=e||(e={}),this.rpc.invoke("config",this.configuration)},e.prototype.open=function(e){this.opened||(this.opened=!0,function(){if(t=h.getElementsByTagName("head")[0],n=h.querySelector("meta[name=viewport]"),i="",u=h.body,r=h.documentElement,o=r.style.cssText||"",s=u.style.cssText||"",a="position: relative; overflow: hidden; height: 100%",!n){var e=h.createElement("meta");e.name="viewport",e.content="",t.appendChild(e),n=e}i=n.getAttribute("content"),c=u.scrollTop,n.setAttribute("content","width=device-width, user-scalable=no"),u.style.cssText=a,r.style.cssText=a}(),this.iframe.style.display="block",this.rpc.invoke("open",e))},e.prototype.complete=function(e){this.configuration.complete(e)},e.prototype.addfingerprint=function(e){try{p.initfp||(initDFP(e.sessiontoken,e.purchasenumber,e.clientip,e.merchantid),p.initfp=!0)}catch(e){}},e.prototype.qrcomplete=function(e){try{console.log(JSON.stringify(e)),window.location.replace(e.url)}catch(e){console.log(e)}},e.prototype.cancel=function(){this.close(),this.configuration.cancel&&this.configuration.cancel()},e.prototype.close=function(){this.opened=!1,this.iframe.style.display="none",h.body.className=h.body.className.replace("visanet-opened",""),n.setAttribute("content",i),u.style.cssText=o,r.style.cssText=s,u.scrollTop=c},e.prototype.addIframe=function(){var e,t=h.createElement("div");return t.id="visaNetWrapper",(e=h.createElement("iframe")).id="visaNetJS",e.setAttribute("frameBorder","0"),e.setAttribute("allowtransparency","true"),e.style.cssText="z-index: 2147483646;\ndisplay: none;\nbackground: transparent;\nbackground: rgba(0,0,0,0.005);\nborder: 0px none transparent;\noverflow-x: hidden;\noverflow-y: auto;\nvisibility: hidden;\nmargin: 0;\npadding: 0;\n-webkit-tap-highlight-color: transparent;\n-webkit-touch-callout: none; position: fixed;\nleft: 0;\ntop: 0;\nwidth: 100%;\nheight: 100%;",e.src=this.src,t.appendChild(e),h.body.appendChild(t),d.bind(e,"load",function(){e.style.visibility="visible"}),e},e}()}}.call(this,document),function(e){if(!this.VisanetCheckout.Tab){var t=this.VisanetCheckout.RPC,n=this.VisanetCheckout.utils,i=this.VisanetCheckout;this.VisanetCheckout.Tab=function(){function e(){var e=i.host+"/visanet.html?"+Math.random();i.onCI&&(e+="&ci=true"),this.opened=!1,this.src=e}return e.prototype.config=function(e){this.configuration=e||(e={}),this.configuration.inTab=!0},e.prototype.open=function(e){this.opened||(this.opened=!0,this.createTab(),this.rpc.invoke("config",this.configuration),this.rpc.invoke("open",e))},e.prototype.createTab=function(){var e=this;this.tab=window.open(this.src,"btfljs"),this.rpc=new t({target:this.tab,type:"server"}),this.rpc.methods.cancel=n.bindFn(this.cancel,this),this.rpc.methods.addfingerprint=n.bindFn(this.addfingerprint,this),this.rpc.methods.qrcomplete=n.bindFn(this.qrcomplete,this),this.rpc.methods.complete=n.bindFn(this.complete,this),this.rpc.whenReady(function(){e.checkIfClosed()})},e.prototype.checkIfClosed=function(){var e=this;this.checkInterval&&clearInterval(this.checkInterval),this.checkInterval=setInterval(function(){e.tab.closed&&e.close()},1e3)},e.prototype.complete=function(e){this.close(),this.configuration.complete(e)},e.prototype.addfingerprint=function(e){try{i.initfp||(initDFP(e.sessiontoken,e.purchasenumber,e.clientip,e.merchantid),i.initfp=!0)}catch(e){}},e.prototype.qrcomplete=function(e){try{console.log(JSON.stringify(e)),window.location.replace(e.url)}catch(e){console.log(e)}},e.prototype.cancel=function(){this.close(),this.configuration.cancel&&this.configuration.cancel()},e.prototype.close=function(){clearInterval(this.checkInterval),this.opened=!1,this.tab.closed||this.tab.close()},e}()}}.call(this,document),function(e){if(!this.VisanetCheckout.View){var t=this.VisanetCheckout.ua,n=this.VisanetCheckout;this.VisanetCheckout.getView=function(e){return t.isMobileDevice()&&e.tabOnMobile?n.Tab:n.Iframe}}}.call(this,document),function(){var t="Sorry, but you can't make payment using this browser as its version is considered unsecure. Please, use latest version of your browser or download and install latest version of free Firefox / Chrome.";this.VisanetCheckout.Checkout||(!1===this.VisanetCheckout.Navigator.isSupportTLS1_2()&&alert(t),this.VisanetCheckout.Checkout=function(){var r;function e(){}return!1===VisanetCheckout.Navigator.isSupportTLS1_2()?(e.config=function(e){},e.open=function(e){alert(t)}):(this.VisanetCheckout.utils.addJsLink(this.VisanetCheckout.onCI?this.VisanetCheckout.host+"/js/dev_dfp.js":this.VisanetCheckout.host+"/js/prd_dfp.js"),e.config=function(e){var n=this,t=this.validate,i=this.utils;(e=t.preprocess(e))&&t.isValid(e)&&(this.configuration=e,this.configuration.complete=function(e){var t=document.createElement("form");t.appendChild(i.addInput("transactionToken",e.token)),t.appendChild(i.addInput("customerEmail",e.email)),t.appendChild(i.addInput("channel",e.channel)),t.method="POST",t.action=n.configuration.action,document.body.appendChild(t),t.submit()},void 0===r&&(viewClass=VisanetCheckout.getView(e),r=new viewClass),r.config(e))},e.open=function(e){var t=this.validate;this.configuration?e?(this.configuration=t.combinate(e,this.configuration),this.configuration=t.preprocess(this.configuration),this.configuration&&t.isValid(this.configuration)&&(r.config(this.configuration),r.open(this.configuration))):r.open(this.configuration):alert("At a minimum, the action, merchantid, sessiontoken, amount and purchasenumber options have to be set")}),e}())}.call(this),function(){if(!this.VisanetCheckout.Button){var n=this.VisanetCheckout.utils,i=this.VisanetCheckout,t=window.attachEvent&&!window.addEventListener;i.Button=function(){function e(e,t){this.form=e,this.complete=n.bindFn(this.complete,this),this.open=n.bindFn(this.open,this),this.cancel=n.bindFn(this.cancel,this),this.config=t,this.config.complete=this.complete,this.config.cancel=this.cancel,this.config.tabOnMobile=!1,this.params={channel:t.channel,amount:t.amount,currency:t.currency,cardholderemail:t.cardholderemail,cardholdername:t.cardholdername,cardholderlastname:t.cardholderlastname,sessiontoken:t.sessiontoken,purchasenumber:t.purchasenumber},i.configure(this.config),this.render()}return e.prototype.render=function(){var e=i.host+"/img/button/",t=!!this.config.recurrence&&"true"===this.config.recurrence.toString().trim().toLowerCase();n.addCssLink(i.host+"/css/button.css"),this.btn=document.createElement("button"),this.btn.setAttribute("type","submit"),this.config.buttonsize=this.config.buttonsize?this.config.buttonsize.trim().toLowerCase():"default",this.config.buttoncolor=this.config.buttoncolor?this.config.buttoncolor.trim().toLowerCase():"navy",i.validate.inValues(this.config.channel,"web","mobile","callcenter","recurrent")||(this.config.channel="web"),i.validate.inValues(this.config.buttonsize,"small","medium","large")||(this.config.buttonsize="default"),i.validate.inValues(this.config.buttoncolor,"navy","gray")||(this.config.buttoncolor="navy"),this.btn.className="start-js-btn modal-opener "+(this.config.buttonsize?this.config.buttonsize:"default"),this.btn.style="true"===this.config.custom?"display:none;":"",e+=i.isSpanish?"ES/":"EN/",e+=this.config.buttoncolor,e+="/"+this.config.buttonsize+(t?"/SubscribeWith.png":"/PayWith.png"),this.btn.style.background='url("'+e+'")',n.bind(this.btn,"click",this.open),this.form.appendChild(this.btn)},e.prototype.open=function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,t?alert("Due to security reasons please, use modern browser (IE11, FireFox, Chrome or Safari) to make payment!"):(navigator.userAgent.match(/iPhone|iPad|iPod/i)&&(window.scrollTo(0,0),document.body.className+="visanet-opened"),i.open(this.params)),!1},e.prototype.complete=function(e){this.form.appendChild(n.addInput("transactionToken",e.token)),this.form.appendChild(n.addInput("customerEmail",e.email)),this.form.appendChild(n.addInput("channel",e.channel)),this.form.submit()},e.prototype.cancel=function(){},e}()}}.call(this),function(){this.VisanetCheckout.open||(this.VisanetCheckout.open=this.VisanetCheckout.Checkout.open,this.VisanetCheckout.configure=this.VisanetCheckout.Checkout.config)}.call(this),function(){if(!this.VisanetCheckout.auto){this.VisanetCheckout.auto=!0;var e=this.VisanetCheckout.scriptTag,t=e.parentElement,n={};if("FORM"==t.tagName){var r,o;for(i=0;i<e.attributes.length;i++)null!==(o=(r=e.attributes[i]).name.match(/^data-(.+)$/))&&(paramName=a(o[1]),n[paramName]=r.value);var s=t.getAttribute("action");if(n.action=s,null!=n){n.tabOnMobile=!1;new this.VisanetCheckout.Button(t,n)}}}function a(e){return e.replace(/(?:[-_])(\w)/g,function(e,t){return t.toUpperCase()})}}.call(this);